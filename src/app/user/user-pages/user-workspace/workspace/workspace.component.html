<section *ngIf="!pageEmpty; else elseBlock">

  <!-- main container -->
  <div class="main" id="hello">
    <div class="workspace-title">
      <div class="workspace-title-icon">
        <ngx-emoji emoji="{{pagesDetails.icon}}" size="24"></ngx-emoji>
        <h3>{{pagesDetails.title}}</h3>
      </div>
      <div class="workspace-title-menu">
        <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu">
          <mat-icon>more_vert</mat-icon>
        </button>
        <mat-menu #menu="matMenu">
          <button mat-menu-item>
            <mat-icon class="workspace-title-menu-icon">share</mat-icon>
            <span class="workspace-title-menu-text">Share</span>
          </button>
          <button mat-menu-item>
            <mat-icon class="workspace-title-menu-icon">delete</mat-icon>
            <span class="workspace-title-menu-text">Delete</span>
          </button>
          <button mat-menu-item>
            <mat-icon class="workspace-title-menu-icon">ios_share</mat-icon>
            <span class="workspace-title-menu-text">Export</span>
          </button>
        </mat-menu>
      </div>

    </div>
    <div class="workspace-cover-img" *ngIf="pagesDetails.coverImg.url;else elseCoverImg"
      [ngStyle]="{'background-position-y':backgroundPositionY,'background-image':backgroundImage,'cursor':cursor}">
      <div class="flex justify-between gap-1" *ngIf="!isbackgroundPositionY">
        <form action="">
          <input (input)="uploadCover($event,pagesDetails._id)" id="files" type="file" accept="image/*">
          <label for="files">Change Cover</label>
        </form>

        <div (click)="dragOpenCoverImage()">
          <label>Reposition</label>
        </div>
      </div>
      <div class="flex flex-col gap-y-1" *ngIf="isbackgroundPositionY">
        <div class="dragY flex w-full">
          <input (input)="dragYPosition($event)" type="range" min="0" max="100"
            value="{{pagesDetails.coverImg.positionY}}">
        </div>

        <div class="flex justify-start gap-1">
          <div (click)="dragCloseCoverImage()">
            <label>Cancel</label>
          </div>

          <div (click)="dragSaveCoverImage(pagesDetails._id)">
            <label>Save</label>
          </div>
        </div>
      </div>
    </div>
    <ng-template #elseCoverImg>
      <div class="workspace-cover-img">
        <div>
          <form action="upload image">
            <input (input)="uploadCover($event,pagesDetails._id)" id="files" type="file" accept="image/*">
            <label for="files">Add Cover</label>
          </form>
        </div>
      </div>
    </ng-template>
    <div class="workspace-page-icon" (click)="editPageIcon(pagesDetails._id)">
      <ngx-emoji emoji="{{pagesDetails.icon}}" size="42"></ngx-emoji>
    </div>
  </div>

  <!-- title container -->
  <div class="workspace-title-container">
    <input (input)="pageNameUpdate($event,pagesDetails._id)" maxlength="20" value="{{pagesDetails.title}}"
      class="text-3xl w-full md:w-1/2 md:text-4xl">
  </div>

  <!-- workspace content container -->
  <div class="workspace-content-container">
    <div *ngFor="let element of array;let i = index" class="workspace-content-set mt-1">
      <div id="{{element}}-{{i}}" class="workspace-content" contenteditable="true" spellcheck="true"
        placeholder="Type '/' for commands" (input)="openOptionTab($event)" (keydown)="onKeydown($event,{element,i})">
      </div>
      <div class="workspace-content-handle">
        <mat-icon>add</mat-icon>
      </div>
    </div>
  </div>

</section>

<ng-template #elseBlock>
  <div class="empty-page-container">
    <div class="empty-page">
      <i class="fa-solid fa-file"></i>
      <h3>Open a page</h3>
    </div>
  </div>
</ng-template>